{"version":3,"file":"qtiled.dev.js","sources":["../../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../src/utils.js","../../../src/ellipse.js","../../../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../src/polygon.js","../../../src/tile-neighbors.js","../../../src/astar.js","../../../src/index.js"],"sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","/* 根据行列数设定，取得对应元坐标集合\n* @param {Number}   column       列数\n* @param {Number}   row          行数\n* @param {Function} processor    加工：可以用于将单位为1的坐标值换算为目标值或对象\n* @param {Function} filter       过滤\n* @return {Array} 生成的坐标集合\n*/\nexport function getUnitsByRowCol (column = 1, row = 1, processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  const ret = [];\n  const halfCol = Math.round(column / 2);\n  const halfRow = Math.round(row / 2);\n  for(let x = 1; x <= column; x++) {\n    const xId = x - halfCol;\n    for(let y = 1; y <= row; y++) {\n      const yId = y - halfRow;\n      filter(xId, yId, x, y, column, row) && ret.push(processor(xId, yId, x, y, column, row));\n    }\n  }\n  return ret;\n};\n\n/* 根据行列数设定，取得与其最近的邻居元坐标集合\n* @param {Number}   column    列数\n* @param {Number}   row       行数\n* @param {Function} filter    过滤\n* @return {Array} 生成的坐标集合\n*/\nexport function getNeighbourUnitsByRowCol (column = 1, row = 1, processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  return getUnitsByRowCol(\n    column + 2,\n    row + 2,\n    processor,\n    (xId, yId, x, y, column, row)=>filter(xId, yId, x, y, column, row) && (x === 1 || x === column || y === 1 || y === row)\n  );\n};\n\n/* 根据斜对角元素数设定，取得斜对角范围内的错列元坐标集合（可用于将正规布局裁切掉四个角，生成菱形布局）\n* @param {Number}   column    列数\n* @param {Number}   row       行数\n* @param {Function} filter    过滤\n* @return {Array} 生成的坐标集合\n*/\nexport function getDiagonalUnitsByRowCol (column = 1, row = 1, processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  const halfCol = Math.round(column / 2) - column % 2;\n  const halfRow = Math.round(row / 2) - row % 2;\n  return getUnitsByRowCol(\n    column,\n    row,\n    processor,\n    (xId, yId, x, y, column, row)=>filter(xId, yId, x, y, column, row) && Math.abs(xId) / halfCol + Math.abs(yId) / halfRow <= 1\n  );\n}\n\n/* 根据设定的起始点与结束点，取得这两点作为对角线对应矩形范围内的元坐标集合\n* @param {Array}   startUnitXY  X、Y元坐标值\n* @param {Array}   endUnitXY    X、Y元坐标值\n* @return {Array}  元坐标集合\n*/\nexport function getUnitsByDiagonal (startUnitXY = [], endUnitXY = [], processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  const [startX = 0, startY = 0] = startUnitXY;\n  const [endX = 0, endY = 0] = endUnitXY;\n  const minX = Math.min(startX, endX);\n  const maxX = Math.max(startX, endX);\n  const minY = Math.min(startY, endY);\n  const maxY = Math.max(startY, endY);\n  const ret = [];\n  for(let xId = minX; xId <= maxX; xId++) {\n    for(let yId = minY; yId <= maxY; yId++) {\n      filter(xId, yId, minX, minY, maxX, maxY, startUnitXY, endUnitXY) && ret.push(processor(xId, yId, minX, minY, maxX, maxY, startUnitXY, endUnitXY));\n    }\n  }\n  return ret;\n}\n\n/* 根据设定角度，将指定的坐标绕原点旋转，并返回旋转后的坐标值\n* @param {Array}   unitXY   X、Y元坐标值\n* @param {Number}  angle    要旋转的角度值\n* @return {Array}  旋转后的坐标值\n*/\nconst oneArc = Math.PI / 180;\nexport function rotateUnit (unitXY = [], angle = 0) {\n  const [x = 0, y = 0] = unitXY;\n\n  // 角度转弧度\n const arc = angle * oneArc;\n  // 弧度转正余弦(考虑浮点溢出精度问题，这里 *10 计算后使用 Math.round 取整回去)\n  const sinv = Math.sin(arc) * 10;\n  const cosv = Math.cos(arc) * 10;\n\n  // 计算得到新坐标点\n  return [Math.round(x * cosv - y * sinv) / 10, Math.round(x * sinv + y * cosv) / 10];\n}\n\n/* 根据元坐标、渲染宽高、原点像素坐标，取得矩形元素渲染时的像素坐标\n* @param {Array}   unitXY   X、Y元坐标值\n* @param {Array}   size     width, height 元素宽高值\n* @param {Array}   originXY 基准像素点的X、Y像素坐标值\n* @return {Array} x,y 对应的像素值\n*/\nexport function unit2pixel (unitXY = [0, 0], size = [10, 10], originXY = [0, 0]) {\n  return unitXY.map((XY, i)=>_half_precision(XY * size[i] + originXY[i]));\n}\n// 精确到0.5个单位\nexport function _half_precision (v) {\n  return Math.round(v * 2) / 2;\n}\n/* 根据像素坐标、渲染宽高、原点像素坐标，取得元坐标\n* @param {Array}   pixelXY   X、Y像素坐标值\n* @param {Array}   size     width, height 元素宽高值\n* @param {Array}   originXY 基准像素点的X、Y像素坐标值\n* @return {Array} x,y 对应的元坐标\n*/\nexport function pixel2unit (pixelXY = [0, 0], size = [10, 10], originXY = [0, 0]) {\n  return pixelXY.map((XY, i)=> _half_precision((XY - originXY[i]) / size[i]));\n}\n\n/* 将像素坐标按照tile宽高取整\n* @param {Array}   pixelXY  X、Y像素坐标值\n* @param {Array}   size     width, height 元素宽高值\n* @param {Array}   originXY 基准像素点的X、Y像素坐标值\n* @return {Array} x,y 对应的元坐标\n*/\n/* export function pixelRound (pixelXY = [0, 0], size = [10, 10], originXY = [0, 0]) {\n  return pixelXY.map((XY, i)=> _half_precision( (XY-originXY[i])/size[i] ) );\n}\n*/\n/* 根据元坐标、菱形X-Y两个方向对角线长度、原点像素坐标，取得正菱形元素渲染时的像素坐标\n* @param {Array}   unitXY    X、Y 元坐标值\n* @param {Array}   diagonal  x, y 轴对应对角线长度值\n* @param {Array}   originXY  基准像素点的X、Y像素坐标值\n* @return {Array}  x,y 对应的像素值\n*/\nconst sqrt2 = Math.sqrt(2);\n// 45度的正余弦值\nconst sincos45 = sqrt2 / 2;\n// 元坐标45度变换后的差值补充\nconst unitDiff = -1 / sqrt2;\nexport function unit2rhombusPixel (unitXY = [], diagonal = [], originXY = []) {\n  const [X = 0, Y = 0] = unitXY;\n  const [W = 10, H = 10] = diagonal;\n  const [ox = 0, oy = 0] = originXY;\n\n  // 45度变换\n  const x = (X - Y) * sincos45;\n  const y = (X + Y) * sincos45;\n\n  // 变换后的元坐标换算为像素坐标\n  const pixelX = _half_precision(x * unitDiff * W + ox);\n  const pixelY = _half_precision(y * unitDiff * H + oy);\n\n  return [pixelX, pixelY];\n}\n\n/* 根据像素坐标、菱形X-Y两个方向对角线长度、原点像素坐标，取得正菱形元坐标\n* @param {Array}   pixelXY    X、Y 像素坐标值\n* @param {Array}   diagonal  x, y 轴对应对角线长度值\n* @param {Array}   originXY  基准像素点的X、Y像素坐标值\n* @return {Array}  x,y 对应元坐标值\n*/\nexport function rhombusPixel2unit (pixelXY = [], diagonal = [], originXY = []) {\n  const [pixelX = 0, pixelY = 0] = pixelXY;\n  const [W = 10, H = 10] = diagonal;\n  const [ox = 0, oy = 0] = originXY;\n\n  // 像素坐标换算为元坐标\n  const uX = (pixelX - ox) / (unitDiff * W);\n  const uY = (pixelY - oy) / (unitDiff * H);\n\n  // 45度变换\n  const unitX = _half_precision((uX + uY) / sincos45 / 2);\n  const unitY = _half_precision(uY / sincos45 - unitX);\n\n  return [unitX, unitY];\n}\n\n/* 根据行列数设定，取得错列布局元坐标集合\n* @param {Number}   column       列数\n* @param {Number}   row          行数\n* @param {Function} filter       过滤\n* @param {Function} processor    加工：可以用于将单位为1的坐标值换算为目标值或对象\n* @return {Array} 生成的坐标集合\n*/\nexport function getStaggeredUnitsByRowCol (column = 1, row = 1, processor = (x, y)=>[x, y], filter = (x, y)=>true) {\n  const ret = [];\n  // const xIsSingle = column === 1;\n  // const yIsSingle = row === 1;\n  const minCol = -Math.floor(column / 2);\n  const maxCol = column + minCol - 1;\n  const minRow = -Math.floor(row / 2);\n  const maxRow = row + minRow - 1;\n  const size = [1, 1];\n  const pos = [0, 0];\n  for(let rowNum = minRow; rowNum <= maxRow; rowNum++) {\n    const pxY = rowNum * 0.5;\n    const isOdd = Math.abs(pxY % 1) === 0.5;\n    // 奇数行右移，实现错列对齐\n    const xDiff = isOdd ? 0.5 : 0;\n    for(let colNum = minCol; colNum <= maxCol; colNum++) {\n      const pxX = colNum + xDiff;\n      const [xId, yId] = rhombusPixel2unit([pxX, pxY], size, pos);\n      // -del- 排除掉奇数末个，实现整齐效果 -del- ，不再干预、自行 filter\n      // if (yIsSingle || xIsSingle || !isOdd || colNum !== maxCol) {\n        filter(xId, yId, colNum, rowNum, minCol, minRow, maxCol, maxRow, column, row) && ret.push(processor(xId, yId, colNum, rowNum, minCol, minRow, maxCol, maxRow, column, row));\n      // }\n    }\n  }\n  return ret;\n};\n/*\nexport function getStaggeredUnitsByRowCol (column = 1, row = 1, processor = (x, y)=>[x, y], filter = (x, y)=>true) {\n  const ret = [];\n  const xIsSingle = column === 1;\n  const halfX = Math.round(column / 2);\n  const halfY = Math.round(row / 2);\n  const size = [1, 1];\n  const pos = [0, 0];\n  for(let yNum = 1; yNum <= row; yNum++) {\n    const pxY = ((yNum - halfY) / 2);\n    const isOdd = yNum % 2 === 1;\n    // 奇数行右移，实现错列对齐\n    const xDiff = isOdd ? 0.5 : 0;\n    for(let xNum = 0; xNum < column; xNum++) {\n      const pxX = xNum + xDiff - halfX;\n      let [xId, yId] = rhombusPixel2unit([pxX, pxY], size, pos);\n      xId = Math.round(xId);\n      yId = Math.round(yId);\n      // 排除掉奇数第一个，实现整齐效果\n      if(xIsSingle || isOdd || xNum !== 0) {filter(xId, yId, xNum, yNum, column, row) && ret.push(processor(xId, yId, xNum, yNum, column, row));}\n    }\n  }\n  return ret;\n};*/\n\n/* 将任意像素坐标按错列布局中单元格尺寸取整，对应到相应像素坐标\n* @param {Array}    pos       像素坐标 x y 值\n* @param {Array}    size      单元格宽高 w h 值\n* @param {Array}    offsetPos 要累加到结果 x y 值上的偏移量\n* @return {Array} 生成的坐标集合\n*/\nexport function staggeredUnitRound ([vX = 0, vY = 0] = [], [w = 78, h = 40] = [], [oX = 0, oY = 0] = []) {\n  const halfW = w / 2;\n  const halfH = h / 2;\n  const y = Math.round(vY / halfH) * halfH;\n  let x = Math.round(vX / w) * w;\n\n  // 偶数行错列布局右移部分回填\n  if(y % h === halfH) {\n    // 鼠标位置大于半个则回移，小于半个则右移；保证在单元格内\n    x += (vX - x) >= 0 ? halfW : -halfW;\n  }\n  return [x + oX, y + oY];\n}\n","/* 椭圆形 */\n\nexport const PI = Math.PI; // π；180度对应的弧度值\nexport const PI_DBL = PI * 2; // 2 倍的 π；360度对应的弧度值\nexport const PI_HALF = PI / 2; // 一半的 π；90度对应的弧度值\nexport const PI_OPF = PI + PI_HALF; // 1.5 倍的π One point five；270度对应弧度值\nexport const PI_OA = PI / 180; // One Angle 1角度换算为弧度值\n\n/* 角度转弧度\n* @param {Number}  angle    角度值 0 ~ 360+N\n* @return {Number} 弧度值\n*/\nexport function angle2Radian (angle = 0) {\n  return angle * PI_OA;\n}\n\n/* 弧度转角度\n* @param {Number}  radian    弧度值 0 ~ PI*N\n* @return {Number} 角度值\n*/\nexport function radian2Angle (radian = 0) {\n  return radian / PI_OA;\n}\n\n/* 根据椭圆的原点、X轴半径、Y轴半径、旋转弧度，求得圆周上的点坐标\n* @param  {Number}  x0        圆心X点坐标值\n* @param  {Number}  y0        圆心Y点坐标值\n* @param  {Number}  radiusX   X轴半径值\n* @param  {Number}  radiusY   Y轴半径值\n* @param  {Number}  radian    旋转弧度值\n* @return {Array}   [x, y]\n*/\nexport function getEllipsePoint (x0, y0, radiusX, radiusY, radian) {\n  radian %= PI_DBL;\n  if(radian < 0) radian += PI_DBL;\n  // 第一或第四象限取正、其他象限取负\n  const d = radian <= PI_HALF || radian > PI_OPF ? 1 : -1;\n  const k = Math.tan(radian);\n  const v = 1 / radiusX ** 2 + k ** 2 / radiusY ** 2;\n  const x = d * Math.sqrt(1 / v) + x0;\n  return [x, k * x + y0 - k * x0];\n};\n\n/* 根据椭圆的原点、X轴半径、Y轴半径、旋转角度，求得圆周上的点坐标\n* @param  {Number}  x0        圆心X点坐标值\n* @param  {Number}  y0        圆心Y点坐标值\n* @param  {Number}  radiusX   X轴半径值\n* @param  {Number}  radiusY   Y轴半径值\n* @param  {Number}  angle     旋转角度值\n* @return {Array}   [x, y]\n*/\nexport function getEllipsePointByAngle (x0, y0, radiusX, radiusY, angle) {\n  return getEllipsePoint(x0, y0, radiusX, radiusY, angle2Radian(angle));\n}\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* 多边形相关配置及方法 */\n\n// 基础配置参数\nconst HALF = 0.5;\nconst FLAH = -HALF;\nconst QUAR = 0.25; // 四分之一\nconst RAUQ = -QUAR;\nconst TQUA = 1 - QUAR; // 正六边形两行重合部分高度\n\n// 正矩形顶点集合\nexport const rectPoints = [\n  [FLAH, FLAH],\n  [HALF, FLAH],\n  [HALF, HALF],\n  [FLAH, HALF],\n];\n\n/* 根据计划渲染后的正矩形宽高值，得到顶点坐标集合\n* @param  {Number}  width    宽度\n* @param  {Number}  height   高度\n* @return {Array}   [[x, y], ...]\n*/\nexport function getRectPoints(width = 1, height = 1) {\n  return getPolygonPoints(rectPoints, width, height);\n};\n\n/* 得到一组矩形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y], ...]\n */\nexport function getRectPositions (mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown') {\n  return getTilesPositions(1, mainAxisRange, subAxisRange, tileSize, 'none', renderOrder);\n}\n\n// 正菱形顶点集合\nexport const rhombusPoints = [\n  [0, FLAH],\n  [HALF, 0],\n  [0, HALF],\n  [FLAH, 0],\n];\n\n/* 根据计划渲染的菱形宽高值，得到顶点坐标集合\n* @param  {Number}  width    宽度\n* @param  {Number}  height   高度\n* @return {Array}   [[x, y], ...]\n*/\nexport function getRhombusPoints (width = 1, height = 1) {\n  return getPolygonPoints(rhombusPoints, width, height);\n};\n\n/* 得到一组错列布局菱形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y], ...]\n */\nexport function getRhombusPositions (mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown', stagger = 'odd') {\n  return getTilesPositions(HALF, mainAxisRange, subAxisRange, tileSize, stagger, renderOrder);\n}\n\n/* 得到一组等距正菱形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y]...]\n */\nexport function getIsometricRhombusPositions (mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown') {\n  const halfWidth = tileSize[0] / 2;\n  const halfHeight = tileSize[1] / 2;\n  return twoDimForEach(mainAxisRange, subAxisRange, renderOrder, (m, s) => [\n    (m + s) * halfWidth,\n    (s - m) * halfHeight,\n    m,\n    s\n  ]);\n}\n\n// 正六边形顶点集合（上下为尖）\nexport const hexagonPoints = [\n  [0, FLAH],\n  [HALF, RAUQ],\n  [HALF, QUAR],\n  [0, HALF],\n  [FLAH, QUAR],\n  [FLAH, RAUQ],\n];\n\n/* 根据计划渲染的六边形宽高值得到顶点坐标集\n* @param  {Number}  width    宽度\n* @param  {Number}  height   高度\n* @param  {String}  axis     主轴方向 'x' || 'y'；默认为 'y'，上下是尖\n* @return {Array}   [[x, y], ...]\n*/\nexport function getHexagonPoints(width = 1, height = 1, axis = 'y') {\n  return getPolygonPoints(hexagonPoints, width, height, axis);\n};\n\n/* 得到一组错列布局六边形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y], ...]\n */\nexport function getHexagonPositions(mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown', stagger = 'odd') {\n  return getTilesPositions(TQUA, mainAxisRange, subAxisRange, tileSize, stagger, renderOrder);\n}\n\n/* 得到一个多边形折线顶点坐标集合\n * @param  {Array}     basePoints    多边形顶点配置，如上文的: rhombusPoints\n * @param  {Number}    width         渲染时的宽度值\n * @param  {Number}    height        渲染时的高度值\n * @param  {String}    axis          主轴方向 'x' || 'y'；默认为 'y'，上下是尖\n * @return {Array}     [x, y]\n */\nfunction getPolygonPoints(basePoints, width = 1, height = 1, axis = 'y') {\n  let fun = ([x, y]) => [x * width, y * height];\n  // 如果是要将多边形图案横过来的，旋转90度（六边形会比较大的不同）\n  if (axis === 'x') {\n    fun = ([x, y]) => [y * width, x * height];\n  }\n  return basePoints.map(fun);\n};\n\nfunction _for(min, max, iterator) {\n  for (let i = min; i <= max; i++) iterator(i);\n}\nconst forEachConfs = {\n  RightDown(minX = 0, maxX = 0, minY = 0, maxY = 0, iterator) {\n    _for(minX, maxX, (x) => _for(minY, maxY, (y) => iterator(x, y)));\n  },\n  RightUp(minX = 0, maxX = 0, minY = 0, maxY = 0, iterator) {\n    _for(minX, maxX, (x) => _for(-maxY, -minY, (y) => iterator(x, y)));\n  },\n  LeftDown(minX = 0, maxX = 0, minY = 0, maxY = 0, iterator) {\n    _for(-maxX, -minX, (x) => _for(minY, maxY, (y) => iterator(x, y)));\n  },\n  LeftUp(minX = 0, maxX = 0, minY = 0, maxY = 0, iterator) {\n    _for(-maxX, -minX, (x) => _for(-maxY, -minY, (y) => iterator(x, y)));\n  }\n};\n\n/* 按renderOrder循环遍历主副轴二维数组\n * @param  {Array}     mainAxisRange  主轴总行数\n * @param  {Array}     subAxisRange   副轴总行数\n * @param  {String}    renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @param  {Function}  iterator    迭代函数，如：(x, y) => [x, y]\n * @return {Array}    [x, y]\n */\nexport function twoDimForEach(mainAxisRange = [0, 0], subAxisRange = [0, 0], renderOrder = 'RightDown', iterator = (x, y) => [x, y]) {\n  const forEachFun = forEachConfs[renderOrder] || forEachConfs.RightDown;\n  const retArr = [];\n  forEachFun(\n    ...mainAxisRange,\n    ...subAxisRange,\n    (x, y) => retArr.push(iterator(x, y))\n  );\n  return retArr;\n}\n\n// 根据偏移行设定，计算偏移量的方法集\nconst staggerConfs = {\n  none: (m) => m,\n  def: (m, s, rem, minS) => Math.round(s - minS) % 2 === rem ? m + HALF : m,\n};\n/* 得到一组错列布局正多边形地图Tile的坐标偏移位置集合\n * @param  {Number}  offsetRate     偏移量比率\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y], ...]\n */\nfunction getTilesPositions(offsetRate = 1, mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], stagger = 'odd', renderOrder = 'RightDown') {\n  const [width, _height] = tileSize;\n  // 多边形在主轴方向必须向上位移，才能保证挫列后网格对齐，所以这里要乘以 offsetRate\n  const height = _height * offsetRate;\n  const rem = Number(stagger === 'odd');\n  // 多边形错列布局副轴上需要偏移来达成错列布局\n  const staggerFun = staggerConfs[stagger] || staggerConfs.def;\n  const minS = subAxisRange[0];\n  return twoDimForEach(mainAxisRange, subAxisRange, renderOrder, (m, s) => [\n    staggerFun(m, s, rem, minS) * width,\n    s * height,\n    m,\n    s\n  ]);\n}\n\n","// 上下左右8个方位邻居单元的坐标差值及评分权重\nexport default [\n  [1, 0, 10],\n  [0, 1, 10],\n  [0, -1, 10],\n  [-1, 0, 10],\n  [-1, -1, 14],\n  [-1, 1, 14],\n  [1, -1, 14],\n  [1, 1, 14]\n];\n","/* 在 N*N 的坐标系集合中以1为单位进行A*寻径\n* @param {Array}   startUnitXY  X、Y元坐标值\n* @param {Array}   endUnitXY  X、Y元坐标值\n* @param {Function}  filter     自行过滤\n*  比如已知当前坐标，可以根据坐标对应的精灵属性判断是否可穿越：\n*  filter(x:当前位置X, y:当前位置Y, cost:位移成本(平移则为10、对角则为14), parentX:从哪个坐标过来的, parentY::从哪个坐标过来的)\n* @return {Array} 匹配的路径集合或空数组\n*/\n// 上右下左8个方向相邻单元的差值及评分权重 - 方向优先级以列表次序为准（这里后续可以适度扩展动态优先级次序）\nimport referenceArr from './tile-neighbors';\n\nexport default function (startUnitXY = [], endUnitXY = [], filter = (xId, yId, cost, refX, refY)=>true) {\n  // console.log(fromX + ',' + fromY, 'to', toX + ',' + toY);\n  const [fromX = 0, fromY = 0] = startUnitXY;\n  const [toX = 0, toY = 0] = endUnitXY;\n\n  // 起止点相同直接返回当前点\n  if(fromX === toX && fromY === toY) {\n    return [startUnitXY];\n  }\n  // 排除不可能到达的点，避免死循环\n  if(Math.abs(fromX % 1) !== Math.abs(toX % 1) || Math.abs(fromY % 1) !== Math.abs(toY % 1)) {\n    return [];\n  }\n  const cost = {};\n  const parentsPoints = {};\n\n  cost[startUnitXY.join()] = 0;\n\n  // const _limit = 0;\n  function checker (x, y) {\n    const eligiblePoints = [];\n    const currentCost = cost[x + ',' + y];\n    for(let refI = 0; refI < 8; refI++) {\n      const ref = referenceArr[refI];\n      const nextX = x + ref[0];\n      const nextY = y + ref[1];\n      const refCost = ref[2];\n      const nextKey = nextX + ',' + nextY;\n      const nextCost = cost[nextKey];\n      if(filter(nextX, nextY, refCost, x, y) && (nextCost === undefined || currentCost + refCost < nextCost)) {\n        cost[nextKey] = currentCost + refCost;\n        parentsPoints[nextKey] = [x, y];\n        eligiblePoints.push([nextX, nextY]);\n        if(nextX === toX && nextY === toY) {\n          break;\n        }\n      }\n    }\n    return eligiblePoints;\n  };\n\n  const openlist = [ startUnitXY ];\n  const path = [];\n  while(openlist.length) {\n    const curPoint = openlist.pop();\n    const eligiblePoints = checker(curPoint[0], curPoint[1]);\n    const epLen = eligiblePoints.length;\n    for(let i = 0; i < epLen; i++) {\n      const extPoint = eligiblePoints[i];\n      // 到达终点生成路径\n      if(extPoint[0] === toX && extPoint[1] === toY) {\n        path.push(endUnitXY);\n        let pathPoint = endUnitXY;\n        // 回查到完整路径\n        while(pathPoint[0] !== fromX || pathPoint[1] !== fromY) {\n          pathPoint = parentsPoints[pathPoint.join()];\n          path.unshift(pathPoint);\n        }\n        // console.log(JSON.stringify(path));\n        return path;\n      }\n      openlist.unshift(extPoint);\n    }\n  }\n  return path;\n};\n","/**  这里的坐标都是以1位单位，按四象限原点为(0, 0)为基准的   **/\n/**  错列或偶数个元素基于原点排列  **/\n\n// 公布tiled基本工具方法\nexport * from './utils';\n\nexport * from './ellipse';\nexport * from './polygon';\n\nimport astar from './astar';\n// 公布A*寻路\nexport const searchPath = astar;\n\n"],"names":["arrayLikeToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","getUnitsByRowCol","column","row","processor","xId","yId","filter","ret","halfCol","Math","round","halfRow","x","y","push","getNeighbourUnitsByRowCol","getDiagonalUnitsByRowCol","abs","getUnitsByDiagonal","startUnitXY","endUnitXY","startX","startY","endX","endY","minX","min","maxX","max","minY","maxY","oneArc","PI","rotateUnit","unitXY","angle","arc","sinv","sin","cosv","cos","unit2pixel","size","originXY","map","XY","i","_half_precision","v","pixel2unit","pixelXY","sqrt2","sqrt","sincos45","unitDiff","unit2rhombusPixel","diagonal","X","Y","W","H","ox","oy","pixelX","pixelY","rhombusPixel2unit","uX","uY","unitX","unitY","getStaggeredUnitsByRowCol","minCol","floor","maxCol","minRow","maxRow","pos","rowNum","pxY","isOdd","xDiff","colNum","pxX","staggeredUnitRound","vX","vY","w","h","oX","oY","halfW","halfH","PI_DBL","PI_HALF","PI_OPF","PI_OA","angle2Radian","radian2Angle","radian","getEllipsePoint","x0","y0","radiusX","radiusY","d","k","tan","getEllipsePointByAngle","arrayWithoutHoles","iterableToArray","nonIterableSpread","HALF","FLAH","QUAR","RAUQ","TQUA","rectPoints","getRectPoints","width","height","getPolygonPoints","getRectPositions","mainAxisRange","subAxisRange","tileSize","renderOrder","getTilesPositions","rhombusPoints","getRhombusPoints","getRhombusPositions","stagger","getIsometricRhombusPositions","halfWidth","halfHeight","twoDimForEach","m","s","hexagonPoints","getHexagonPoints","axis","getHexagonPositions","basePoints","fun","_for","iterator","forEachConfs","RightDown","RightUp","LeftDown","LeftUp","forEachFun","retArr","staggerConfs","none","def","rem","minS","offsetRate","_height","Number","staggerFun","cost","refX","refY","fromX","fromY","toX","toY","parentsPoints","join","checker","eligiblePoints","currentCost","refI","ref","referenceArr","nextX","nextY","refCost","nextKey","nextCost","undefined","openlist","path","length","curPoint","pop","epLen","extPoint","pathPoint","unshift","searchPath","astar"],"mappings":"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"}