{"version":3,"file":"qtiled.dev.js","sources":["../../../src/shapes/ellipse.js","../../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../src/shapes/polygon.js","../../../src/shapes/rect.js","../../../src/shapes/hexagon.js","../../../src/shapes/rhombus.js","../../../src/shapes/index.js","../../../src/utils.js","../../../src/tile-neighbors.js","../../../src/astar.js","../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../src/path-finding/neighbors.js","../../../src/path-finding/a-star.js","../../../src/path-finding/index.js","../../../src/index.js"],"sourcesContent":["/* 椭圆形 */\n\nexport const PI = Math.PI; // π；180度对应的弧度值\nexport const PI_DBL = PI * 2; // 2 倍的 π；360度对应的弧度值\nexport const PI_HALF = PI / 2; // 一半的 π；90度对应的弧度值\nexport const PI_OPF = PI + PI_HALF; // 1.5 倍的π One point five；270度对应弧度值\nexport const PI_OA = PI / 180; // One Angle 1角度换算为弧度值\n\n/* 角度转弧度\n* @param {Number}  angle    角度值 0 ~ 360+N\n* @return {Number} 弧度值\n*/\nexport function angle2Radian(angle = 0) {\n  return angle * PI_OA;\n}\n\n/* 弧度转角度\n* @param {Number}  radian    弧度值 0 ~ PI*N\n* @return {Number} 角度值\n*/\nexport function radian2Angle(radian = 0) {\n  return radian / PI_OA;\n}\n\n/* 根据椭圆的原点、X轴半径、Y轴半径、弧度，求得圆周上的点坐标\n* @param  {Number}  x0        圆心X点坐标值\n* @param  {Number}  y0        圆心Y点坐标值\n* @param  {Number}  radiusX   X轴半径值\n* @param  {Number}  radiusY   Y轴半径值\n* @param  {Number}  radian    弧度值\n* @return {Array}   [x, y]\n*/\nexport function getPoint(x0, y0, radiusX, radiusY, radian) {\n  radian %= PI_DBL;\n  if(radian < 0) radian += PI_DBL;\n  const k = Math.tan(radian);\n  if(Math.abs(k) > 1e5) {\n    return [x0, y0 + (radian < PI ? radiusY : -radiusY)];\n  }\n  // 第一或第四象限取正、其他象限取负\n  const d = radian <= PI_HALF || radian > PI_OPF ? 1 : -1;\n  const v = 1 / radiusX ** 2 + k ** 2 / radiusY ** 2;\n  const x = d * Math.sqrt(1 / v) + x0;\n  return [x, k * x + y0 - k * x0];\n};\n\n/* 根据椭圆的原点、X轴半径、Y轴半径、角度，求得圆周上的点坐标\n* @param  {Number}  x0        圆心X点坐标值\n* @param  {Number}  y0        圆心Y点坐标值\n* @param  {Number}  radiusX   X轴半径值\n* @param  {Number}  radiusY   Y轴半径值\n* @param  {Number}  angle     角度值\n* @return {Array}   [x, y]\n*/\nexport function getPointByAngle(x0, y0, radiusX, radiusY, angle) {\n  return getPoint(x0, y0, radiusX, radiusY, angle2Radian(angle));\n}\n\n/* 根据椭圆的X轴半径、Y轴半径、圆周等分数量、等分点序号、起始弧度，求得圆周上的点坐标\n* @param  {Number}  radiusX   X轴半径值\n* @param  {Number}  radiusY   Y轴半径值\n* @param  {Number}  count     圆周等分数量\n* @param  {Number}  num       圆周等分点序号\n* @param  {Number}  radian    起始弧度\n* @return {Array}   [x, y]\n*/\nexport function getIsometryPoint(radiusX, radiusY, count, num, radian = 0) {\n  radian += PI_DBL * num / count;\n  return [radiusX * Math.cos(radian), radiusY * Math.sin(radian)];\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* 二维多边形相关配置及基础方法 */\n\n/* 基础配置参数（个别参数调整涉及算法变化，所以放全局配置，以示特殊）*/\nexport const HALF = 0.5;\nexport const FLAH = -HALF;\nexport const QUAR = 0.25; // 四分之一\nexport const RAUQ = -QUAR;\nexport const TQUA = 1 - QUAR; // 正六边形两行重合部分高度\n\n/* 得到一个多边形折线顶点坐标集合\n * @param  {Array}     baseVertexes    多边形顶点配置，如上文的: rectVertexes\n * @param  {Number}    width         渲染时的宽度值\n * @param  {Number}    height        渲染时的高度值\n * @param  {String}    axis          主轴方向 'x' || 'y'；默认为 'y'，上下是尖\n * @return {Array}     [x, y]\n */\nexport function getVertexes(baseVertexes, width = 1, height = 1, axis = 'y') {\n  let fun = ([x, y]) => [x * width, y * height];\n  // 如果是要将多边形图案横过来的，旋转90度（六边形会比较大的不同）\n  if (axis === 'x') {\n    fun = ([x, y]) => [y * width, x * height];\n  }\n  return baseVertexes.map(fun);\n};\n\nfunction _for(min, max, cbk) {\n  for (let i = min; i <= max; i++) cbk(i);\n}\nfunction for_(min, max, cbk) {\n  for (let i = max; i >= min; i--) cbk(i);\n}\nconst forEachConfs = {\n  RightDown(minX = 0, maxX = 0, minY = 0, maxY = 0, cbk) {\n    _for(minX, maxX, (x) => _for(minY, maxY, (y) => cbk(x, y)));\n  },\n  RightUp(minX = 0, maxX = 0, minY = 0, maxY = 0, cbk) {\n    _for(minX, maxX, (x) => for_(minY, maxY, (y) => cbk(x, y)));\n  },\n  LeftDown(minX = 0, maxX = 0, minY = 0, maxY = 0, cbk) {\n    for_(minX, maxX, (x) => _for(minY, maxY, (y) => cbk(x, y)));\n  },\n  LeftUp(minX = 0, maxX = 0, minY = 0, maxY = 0, cbk) {\n    for_(minX, maxX, (x) => for_(minY, maxY, (y) => cbk(x, y)));\n  }\n};\n\n/* 按renderOrder循环遍历主副轴二维数组\n * @param  {Array}     mainAxisRange  主轴总行数\n * @param  {Array}     subAxisRange   副轴总行数\n * @param  {String}    renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @param  {Function}  iterator       迭代函数，如：(x, y) => [x, y]\n * @return {Array}    [x, y]\n */\nexport function twoDimForEach(mainAxisRange = [0, 0], subAxisRange = [0, 0], renderOrder = 'RightDown', iterator = (x, y) => [x, y]) {\n  const forEachFun = forEachConfs[renderOrder] || forEachConfs.RightDown;\n  const retArr = [];\n  forEachFun(\n    ...mainAxisRange,\n    ...subAxisRange,\n    (x, y) => {\n      const ret = iterator(x, y);\n      ret && retArr.push(ret);\n    }\n  );\n  return retArr;\n}\n\n// 某行是否需要按全局错列配置错位排列\nexport function isStaggerLine(lineNum, stagger) {\n  return stagger !== 'none' && Math.abs(Math.round(lineNum) % 2) === Number(stagger === 'odd');\n}\n\n/* 得到一个错列布局正多边形地图Tile的坐标值\n * @param  {Number}  lineRate       偏移量比率\n * @param  {Array}   xyNum          目标元素XY索引值，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {Array}   originXY       原点像素坐标值，如：[0, 0]\n * @return {Array}   [x, y, xNum, yNum]\n */\nexport function getPosition(lineRate = 1, xyNum = [0, 0], tileSize = [8, 4], stagger = 'none', originXY = [0, 0]) {\n  const [width, height] = tileSize;\n  const [xNum, yNum] = xyNum;\n  return [\n    // X轴按Y轴奇偶性补充错列偏移量\n    originXY[0] + (xNum + (isStaggerLine(yNum, stagger) ? HALF : 0)) * width,\n    // 多边形在主轴方向必须向上位移，才能保证挫列后网格对齐，所以这里要乘以 lineRate\n    originXY[1] + yNum * height * lineRate,\n    xNum,\n    yNum\n  ];\n}\n\n/* 得到一组错列布局正多边形地图Tile的坐标偏移位置集合\n * @param  {Number}  lineRate       主轴偏移量比率\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y, xNum, yNum], ...]\n */\nexport function getPositions(lineRate = 1, mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], stagger = 'odd', renderOrder = 'RightDown') {\n  const [width, _height] = tileSize;\n  // 多边形在主轴方向必须向上位移，才能保证挫列后网格对齐，所以这里要乘以 lineRate\n  const height = _height * lineRate;\n  const needOffset = stagger !== 'none';\n  const isOddNum = Number(stagger === 'odd');\n  // 多边形错列布局副轴上需要偏移来达成错列布局\n  return twoDimForEach(mainAxisRange, subAxisRange, renderOrder, (mainAxisNum, subAxisNum) => {\n    let lineRate = mainAxisNum;\n    if (needOffset && Math.abs(Math.round(subAxisNum) % 2) === isOddNum) {\n      lineRate += HALF; // 补充错列偏移量\n    }\n    return [\n      lineRate * width,\n      subAxisNum * height,\n      mainAxisNum,\n      subAxisNum\n    ];\n  });\n}\n\n/* 通过大致的像素坐标值获取该位置tile元素的[xNum, yNum, x, y]\n * @param  {Number}  lineRate       主轴偏移量比率（错列行之间的Y主轴坐标差值与其在主轴行高的比值）\n * @param  {Array}   pos            目标点像素坐标值(相对于画布原点的偏移量)，如：[x<Number>, y<Number>]\n * @param  {Array}   originPos      地图起点元素渲染时像素坐标值，如：[x<Number>, y<Number>]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要错列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @return {Object}  {xNum, yNum, x, y}\n */\nexport function getInfoByPos(lineRate = 1, pos = [0, 0], originPos = [0, 0], tileSize = [8, 4], stagger = 'odd') {\n  const [originX, originY] = originPos;\n  const [width, height] = tileSize;\n  const lineHeight = height * lineRate; // 行高\n  const dotX = pos[0] - originX;\n  const dotY = pos[1] - originY;\n  // 多边形错列布局需要补充偏移量\n  let xNumOffset = 0;\n  const yNum = Math.round(dotY / lineHeight);\n  if (stagger !== 'none' && Math.abs(yNum % 2) === Number(stagger === 'odd')) {\n    xNumOffset = HALF;\n  }\n  const xNum = Math.round(dotX / width - xNumOffset);\n  const centerX = (xNum + xNumOffset) * width;\n  const centerY = yNum * lineHeight;\n  const tileX = centerX + originX;\n  const tileY = centerY + originY;\n  return [ xNum, yNum, tileX, tileY ];\n}\n","/* 正矩形地图元件方法 */\n\nimport {\n  HALF,\n  FLAH,\n  twoDimForEach,\n  getVertexes as getPolygonVertexes,\n  getPositions as getPolygonPositions,\n  getInfoByPos as getPolygonInfoByPos,\n} from './polygon';\n\n// 宽高为1的正矩形顶点集合\nexport const vertexes = [\n  [FLAH, FLAH],\n  [HALF, FLAH],\n  [HALF, HALF],\n  [FLAH, HALF],\n];\n\n/* 上、右、下、左，四个边邻居 [xNum, yNum, cost] 差值及距离成本 */\nexport const directions = [\n  [0, -1, 1, '↑'],\n  [1, 0, 1, '→'],\n  [0, 1, 1, '↓'],\n  [-1, 0, 1, '←'],\n];\n\n/* 左上、右上、左下、右下，四个角邻居 [xNum, yNum] 差值及距离成本 */\nexport const corners = [\n  [-1, -1, 1.414, '↖'],\n  [1, -1, 1.414, '↗'],\n  [1, 1, 1.414, '↙'],\n  [-1, 1, 1.414, '↘'],\n];\n\n/* 根据计划渲染后的正矩形宽高值，得到顶点坐标集合\n* @param  {Array}   size    如： [width{Number}, height{Number}]\n* @return {Array}   [[x, y], ...]\n*/\nexport function getVertexes([width, height] = [1, 1]) {\n  return getPolygonVertexes(vertexes, width, height);\n};\n\n/* 得到一个矩形地图瓦片的坐标偏移位置\n * @param  {Array}   xyNum          xy轴序号，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {Array}   originXY       原点像素坐标值，如：[80, 40]\n * @return {Array}   [x, y]\n */\nexport function getPosition(xyNum = [0, 0], tileSize = [8, 4], originXY = [0, 0]) {\n  return [originXY[0] + xyNum[0] * tileSize[0], originXY[1] + xyNum[1] * tileSize[1]];\n}\n\n/* 得到一组矩形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y], ...]\n */\nexport function getPositions(mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown') {\n  return getPolygonPositions(1, mainAxisRange, subAxisRange, tileSize, 'none', renderOrder);\n}\n\n/* 获得与pos坐标有交集的tile元素的{xNum, yNum, x, y}\n * @param  {Array}   pos            目标点像素坐标值(相对于画布原点的偏移量)，如：[x<Number>, y<Number>]\n * @param  {Array}   originPos      地图起点元素渲染时像素坐标值，如：[x<Number>, y<Number>]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @return {Array}  [xNum, yNum, x, y]\n */\nexport function getInfoByPos(pos = [0, 0], originPos = [0, 0], tileSize = [8, 4]) {\n  return getPolygonInfoByPos(1, pos, originPos, tileSize, 'none');\n}\n\n/* 获得指定tile下标周边的邻居元素们\n * @param  {Array}     xyNum           XY轴序号，如：[0, 0]\n * @param  {Number}    distance        下标间隔量，目标元素的第几圈邻居，0 ~ N\n * @param  {Function}  iterator        迭代函数，如：(x, y) => [x, y]\n * @param  {String}    renderOrder     渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}  [[xNum, yNum]]\n */\nexport function getNeighbors(xyNum = [0, 0], distance = 1, iterator = (x, y) => [x, y], renderOrder) {\n  return twoDimForEach([-distance, distance], [-distance, distance], renderOrder, iterator);\n}\n","/* 正六边形地图元件方法 */\n\nimport {\n  HALF,\n  FLAH,\n  QUAR,\n  RAUQ,\n  TQUA as TQUA_VAL,\n  isStaggerLine,\n  getVertexes as getPolygonVertexes,\n  getPosition as getPolygonPosition,\n  getPositions as getPolygonPositions,\n  getInfoByPos as getPolygonInfoByPos,\n} from './polygon';\n\n// 宽高为1的六边形顶点集合（上下为尖）\nexport const vertexes = [\n  [0, FLAH],\n  [HALF, RAUQ],\n  [HALF, QUAR],\n  [0, HALF],\n  [FLAH, QUAR],\n  [FLAH, RAUQ],\n];\n\nexport const TQUA = TQUA_VAL;\n\n/* 左上、右上、右下、左下、左边、右边，6个边邻居 [xNum, yNum, cost, angle] 差值及距离成本及渲染角度 */\nexport const directionsNormal = [\n  [-1, -1, 1, '↖'],\n  [0, -1, 1, '↗'],\n  [0, 1, 1, '↘'],\n  [-1, 1, 1, '↙'],\n  [-1, 0, 1, '←'],\n  [1, 0, 1, '→'],\n];\n\n/* 错列行邻居下标差值 */\nexport const directionsOffset = [\n  [0, -1, 1, '↖'],\n  [1, -1, 1, '↗'],\n  [1, 1, 1, '↘'],\n  [0, 1, 1, '↙'],\n  [-1, 0, 1, '←'],\n  [1, 0, 1, '→'],\n];\n\n/* 根据计划渲染的六边形宽高值得到顶点坐标集\n* @param  {Array}   size    如： [width{Number}, height{Number}]\n* @param  {String}  axis     主轴方向 'x' || 'y'；默认为 'y'，上下是尖\n* @return {Array}   [[x, y], ...]\n*/\nexport function getVertexes([width = 1, height = 1] = [1, 1], axis = 'y') {\n  return getPolygonVertexes(vertexes, width, height, axis);\n};\n\n/* 得到一个错列布局六边形地图瓦片的坐标位置\n * @param  {Array}   xyNum          目标元素XY索引值，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要错位排列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {Array}   originXY       原点像素坐标值，如：[0, 0]\n * @return {Array}   [x, y]\n */\nexport function getPosition(xyNum = [0, 0], tileSize = [8, 4], stagger = 'odd', originXY = [0, 0]) {\n  return getPolygonPosition(TQUA, xyNum, tileSize, stagger, originXY);\n}\n\n/* 得到一组错列布局六边形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @param  {String}  stagger        需要错列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @return {Array}   [[x, y], ...]\n */\nexport function getPositions(mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown', stagger = 'odd') {\n  return getPolygonPositions(TQUA, mainAxisRange, subAxisRange, tileSize, stagger, renderOrder);\n}\n\n/* 通过大致的像素坐标值获取该位置tile元素的[Num, yNum]\n * @param  {Array}   pos            目标点像素坐标值(相对于画布原点的偏移量)，如：[x<Number>, y<Number>]\n * @param  {Array}   originPos      地图起点元素渲染时像素坐标值，如：[x<Number>, y<Number>]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要错列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @return {Array}  [xNum, yNum, x, y]\n */\nexport function getInfoByPos(pos = [0, 0], originPos = [0, 0], tileSize = [8, 4], stagger = 'odd') {\n  return getPolygonInfoByPos(TQUA, pos, originPos, tileSize, stagger);\n}\n\n/* 获得指定tile下标周边紧邻的邻居们\n * @param  {Array}     originXyNum     参考点元素下标，如：[0, 0]\n * @param  {String}    stagger         需要错位排列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @return {Array}  [[xNum, yNum]]\n */\nexport function getNeighbors(originXyNum = [0, 0], stagger = 'odd') {\n  const [originXNum, originYNum] = originXyNum;\n  const directions = isStaggerLine(originYNum, stagger) ? directionsOffset : directionsNormal;\n  return directions.map(([xNum, yNum]) => [xNum + originXNum, yNum + originYNum]);\n}\n","/* 正菱形地图元件方法 */\n// 点(x, y)在宽w高h的菱形内：| x * h | + | y * w | < h * w * 0.5\n\nimport {\n  HALF,\n  FLAH,\n  twoDimForEach,\n  getVertexes as getPolygonVertexes,\n  getPositions as getPolygonPositions,\n  getInfoByPos as getPolygonInfoByPos,\n} from './polygon';\n\n// 宽高为1的正菱形顶点集合\nconst vertexes = [\n  [0, FLAH],\n  [HALF, 0],\n  [0, HALF],\n  [FLAH, 0],\n];\n\n/* 获取宽高的一半（菱形中心点在顶点坐标系中的值）\n* @param  {Array}   size    如： [width{Number}, height{Number}]\n* @return {Array}   [halfWidth, halfHeight]\n*/\nexport function getHalfSize([width = 1, height = 1] = [1, 1]) {\n  return [width * HALF, height * HALF];\n}\n\n/* 根据计划渲染的菱形宽高值，得到顶点坐标集合\n* @param  {Array}   size    如： [width{Number}, height{Number}]\n* @return {Array}   [[x, y], ...]\n*/\nexport function getVertexes([width = 1, height = 1] = [1, 1]) {\n  return getPolygonVertexes(vertexes, width, height);\n};\n\n/* 得到一组错列布局菱形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y], ...]\n */\nexport function getPositions(mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown', stagger = 'odd') {\n  return getPolygonPositions(HALF, mainAxisRange, subAxisRange, tileSize, stagger, renderOrder);\n}\n\n/* 按等距布局菱形单元横纵坐标值及单元格宽高得到渲染坐标值 */\nexport function getIsometricPosition(xNum, yNum, halfWidth, halfHeight) {\n  return [(xNum + yNum) * halfWidth, (yNum - xNum) * halfHeight];\n}\n\n/* 得到一组等距正菱形地图瓦片的坐标偏移位置集合\n * @param  {Array}   mainAxisRange  主轴行序号区间，如：[0, 0]\n * @param  {Array}   subAxisRange   副轴行序号区间，如：[0, 0]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要挫列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @param  {String}  renderOrder    渲染方向：['RightDown','RightUp', 'LeftDown', 'LeftUp']；默认为 'RightDown'\n * @return {Array}   [[x, y]...]\n */\nexport function getIsometricPositions(mainAxisRange = [0, 0], subAxisRange = [0, 0], tileSize = [8, 4], renderOrder = 'RightDown') {\n  const [halfWidth, halfHeight] = getHalfSize(tileSize);\n  return twoDimForEach(mainAxisRange, subAxisRange, renderOrder, (xNum, yNum) => [\n    ...getIsometricPosition(xNum, yNum, halfWidth, halfHeight),\n    xNum,\n    yNum,\n  ]);\n}\n\n/* 通过大致的像素坐标值获取该位置错列布局tile元素的[Num, yNum, x, y]\n * @param  {Array}   pos            目标点像素坐标值(相对于画布原点的偏移量)，如：[x<Number>, y<Number>]\n * @param  {Array}   originPos      地图起点元素渲染时像素坐标值，如：[x<Number>, y<Number>]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @param  {String}  stagger        需要错列的行：['odd', 'even', 'none']；默认为 'odd' 奇数行错开（通常第一行是0行）\n * @return {Array}  [xNum, yNum, x, y]\n */\nexport function getInfoByPos(pos = [0, 0], originPos = [0, 0], tileSize = [8, 4], stagger = 'odd') {\n  return getPolygonInfoByPos(HALF, pos, originPos, tileSize, stagger);\n}\n\n/* 通过大致的像素坐标值获取该位置等距布局tile元素的[Num, yNum]\n * @param  {Array}   pos            目标点像素坐标值(相对于画布原点的偏移量)，如：[x<Number>, y<Number>]\n * @param  {Array}   originPos      地图起点元素渲染时像素坐标值，如：[x<Number>, y<Number>]\n * @param  {Array}   tileSize       单瓦片图宽高值，如：[80, 40]\n * @return {Object}  {xNum, yNum, x, y}\n */\nexport function getIsometricInfoByPos(pos = [0, 0], originPos = [0, 0], tileSize = [8, 4]) {\n  const [halfWidth, halfHeight] = getHalfSize(tileSize);\n  const [originX, originY] = originPos;\n  const xSteps = (pos[0] - originX) / halfWidth * HALF;\n  const ySteps = (pos[1] - originY) / halfHeight * HALF;\n  const yNum = Math.round(ySteps + xSteps);\n  const xNum = Math.round(xSteps - ySteps);\n  const [x, y] = getIsometricPosition(xNum, yNum, halfWidth, halfHeight);\n  return [\n    xNum,\n    yNum,\n    x + originX,\n    y + originY,\n  ];\n}\n","import * as ellipseFuns from './ellipse';\nexport const ellipse = ellipseFuns;\n\nimport * as rectFuns from './rect';\nexport const rect = rectFuns;\n\nimport * as hexagonFuns from './hexagon';\nexport const hexagon = hexagonFuns;\n\nimport * as rhombusFuns from './rhombus';\nexport const rhombus = rhombusFuns;\n\nimport * as polygonFuns from './polygon';\nexport const polygon = polygonFuns;\n","/* 根据行列数设定，取得对应元坐标集合\n* @param {Number}   column       列数\n* @param {Number}   row          行数\n* @param {Function} processor    加工：可以用于将单位为1的坐标值换算为目标值或对象\n* @param {Function} filter       过滤\n* @return {Array} 生成的坐标集合\n*/\nexport function getUnitsByRowCol (column = 1, row = 1, processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  const ret = [];\n  const halfCol = Math.round(column / 2);\n  const halfRow = Math.round(row / 2);\n  for(let x = 1; x <= column; x++) {\n    const xId = x - halfCol;\n    for(let y = 1; y <= row; y++) {\n      const yId = y - halfRow;\n      filter(xId, yId, x, y, column, row) && ret.push(processor(xId, yId, x, y, column, row));\n    }\n  }\n  return ret;\n};\n\n/* 根据行列数设定，取得与其最近的邻居元坐标集合\n* @param {Number}   column    列数\n* @param {Number}   row       行数\n* @param {Function} filter    过滤\n* @return {Array} 生成的坐标集合\n*/\nexport function getNeighbourUnitsByRowCol (column = 1, row = 1, processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  return getUnitsByRowCol(\n    column + 2,\n    row + 2,\n    processor,\n    (xId, yId, x, y, column, row)=>filter(xId, yId, x, y, column, row) && (x === 1 || x === column || y === 1 || y === row)\n  );\n};\n\n/* 根据斜对角元素数设定，取得斜对角范围内的错列元坐标集合（可用于将正规布局裁切掉四个角，生成菱形布局）\n* @param {Number}   column    列数\n* @param {Number}   row       行数\n* @param {Function} filter    过滤\n* @return {Array} 生成的坐标集合\n*/\nexport function getDiagonalUnitsByRowCol (column = 1, row = 1, processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  const halfCol = Math.round(column / 2) - column % 2;\n  const halfRow = Math.round(row / 2) - row % 2;\n  return getUnitsByRowCol(\n    column,\n    row,\n    processor,\n    (xId, yId, x, y, column, row)=>filter(xId, yId, x, y, column, row) && Math.abs(xId) / halfCol + Math.abs(yId) / halfRow <= 1\n  );\n}\n\n/* 根据设定的起始点与结束点，取得这两点作为对角线对应矩形范围内的元坐标集合\n* @param {Array}   startUnitXY  X、Y元坐标值\n* @param {Array}   endUnitXY    X、Y元坐标值\n* @return {Array}  元坐标集合\n*/\nexport function getUnitsByDiagonal (startUnitXY = [], endUnitXY = [], processor = (xId, yId)=>[xId, yId], filter = ()=>true) {\n  const [startX = 0, startY = 0] = startUnitXY;\n  const [endX = 0, endY = 0] = endUnitXY;\n  const minX = Math.min(startX, endX);\n  const maxX = Math.max(startX, endX);\n  const minY = Math.min(startY, endY);\n  const maxY = Math.max(startY, endY);\n  const ret = [];\n  for(let xId = minX; xId <= maxX; xId++) {\n    for(let yId = minY; yId <= maxY; yId++) {\n      filter(xId, yId, minX, minY, maxX, maxY, startUnitXY, endUnitXY) && ret.push(processor(xId, yId, minX, minY, maxX, maxY, startUnitXY, endUnitXY));\n    }\n  }\n  return ret;\n}\n\n/* 根据设定角度，将指定的坐标绕原点旋转，并返回旋转后的坐标值\n* @param {Array}   unitXY   X、Y元坐标值\n* @param {Number}  angle    要旋转的角度值\n* @return {Array}  旋转后的坐标值\n*/\nconst oneArc = Math.PI / 180;\nexport function rotateUnit (unitXY = [], angle = 0) {\n  const [x = 0, y = 0] = unitXY;\n\n  // 角度转弧度\n const arc = angle * oneArc;\n  // 弧度转正余弦(考虑浮点溢出精度问题，这里 *10 计算后使用 Math.round 取整回去)\n  const sinv = Math.sin(arc) * 10;\n  const cosv = Math.cos(arc) * 10;\n\n  // 计算得到新坐标点\n  return [Math.round(x * cosv - y * sinv) / 10, Math.round(x * sinv + y * cosv) / 10];\n}\n\n/* 根据元坐标、渲染宽高、原点像素坐标，取得矩形元素渲染时的像素坐标\n* @param {Array}   unitXY   X、Y元坐标值\n* @param {Array}   size     width, height 元素宽高值\n* @param {Array}   originXY 基准像素点的X、Y像素坐标值\n* @return {Array} x,y 对应的像素值\n*/\nexport function unit2pixel (unitXY = [0, 0], size = [10, 10], originXY = [0, 0]) {\n  return unitXY.map((XY, i)=>_half_precision(XY * size[i] + originXY[i]));\n}\n// 精确到0.5个单位\nexport function _half_precision (v) {\n  return Math.round(v * 2) / 2;\n}\n/* 根据像素坐标、渲染宽高、原点像素坐标，取得元坐标\n* @param {Array}   pixelXY   X、Y像素坐标值\n* @param {Array}   size     width, height 元素宽高值\n* @param {Array}   originXY 基准像素点的X、Y像素坐标值\n* @return {Array} x,y 对应的元坐标\n*/\nexport function pixel2unit (pixelXY = [0, 0], size = [10, 10], originXY = [0, 0]) {\n  return pixelXY.map((XY, i)=> _half_precision((XY - originXY[i]) / size[i]));\n}\n\n/* 将像素坐标按照tile宽高取整\n* @param {Array}   pixelXY  X、Y像素坐标值\n* @param {Array}   size     width, height 元素宽高值\n* @param {Array}   originXY 基准像素点的X、Y像素坐标值\n* @return {Array} x,y 对应的元坐标\n*/\n/* export function pixelRound (pixelXY = [0, 0], size = [10, 10], originXY = [0, 0]) {\n  return pixelXY.map((XY, i)=> _half_precision( (XY-originXY[i])/size[i] ) );\n}\n*/\n/* 根据元坐标、菱形X-Y两个方向对角线长度、原点像素坐标，取得正菱形元素渲染时的像素坐标\n* @param {Array}   unitXY    X、Y 元坐标值\n* @param {Array}   diagonal  x, y 轴对应对角线长度值\n* @param {Array}   originXY  基准像素点的X、Y像素坐标值\n* @return {Array}  x,y 对应的像素值\n*/\nconst sqrt2 = Math.sqrt(2);\n// 45度的正余弦值\nconst sincos45 = sqrt2 / 2;\n// 元坐标45度变换后的差值补充\nconst unitDiff = -1 / sqrt2;\nexport function unit2rhombusPixel (unitXY = [], diagonal = [], originXY = []) {\n  const [X = 0, Y = 0] = unitXY;\n  const [W = 10, H = 10] = diagonal;\n  const [ox = 0, oy = 0] = originXY;\n\n  // 45度变换\n  const x = (X - Y) * sincos45;\n  const y = (X + Y) * sincos45;\n\n  // 变换后的元坐标换算为像素坐标\n  const pixelX = _half_precision(x * unitDiff * W + ox);\n  const pixelY = _half_precision(y * unitDiff * H + oy);\n\n  return [pixelX, pixelY];\n}\n\n/* 根据像素坐标、菱形X-Y两个方向对角线长度、原点像素坐标，取得正菱形元坐标\n* @param {Array}   pixelXY    X、Y 像素坐标值\n* @param {Array}   diagonal  x, y 轴对应对角线长度值\n* @param {Array}   originXY  基准像素点的X、Y像素坐标值\n* @return {Array}  x,y 对应元坐标值\n*/\nexport function rhombusPixel2unit (pixelXY = [], diagonal = [], originXY = []) {\n  const [pixelX = 0, pixelY = 0] = pixelXY;\n  const [W = 10, H = 10] = diagonal;\n  const [ox = 0, oy = 0] = originXY;\n\n  // 像素坐标换算为元坐标\n  const uX = (pixelX - ox) / (unitDiff * W);\n  const uY = (pixelY - oy) / (unitDiff * H);\n\n  // 45度变换\n  const unitX = _half_precision((uX + uY) / sincos45 / 2);\n  const unitY = _half_precision(uY / sincos45 - unitX);\n\n  return [unitX, unitY];\n}\n\n/* 根据行列数设定，取得错列布局元坐标集合\n* @param {Number}   column       列数\n* @param {Number}   row          行数\n* @param {Function} filter       过滤\n* @param {Function} processor    加工：可以用于将单位为1的坐标值换算为目标值或对象\n* @return {Array} 生成的坐标集合\n*/\nexport function getStaggeredUnitsByRowCol (column = 1, row = 1, processor = (x, y)=>[x, y], filter = (x, y)=>true) {\n  const ret = [];\n  // const xIsSingle = column === 1;\n  // const yIsSingle = row === 1;\n  const minCol = -Math.floor(column / 2);\n  const maxCol = column + minCol - 1;\n  const minRow = -Math.floor(row / 2);\n  const maxRow = row + minRow - 1;\n  const size = [1, 1];\n  const pos = [0, 0];\n  for(let rowNum = minRow; rowNum <= maxRow; rowNum++) {\n    const pxY = rowNum * 0.5;\n    const isOdd = Math.abs(pxY % 1) === 0.5;\n    // 奇数行右移，实现错列对齐\n    const xDiff = isOdd ? 0.5 : 0;\n    for(let colNum = minCol; colNum <= maxCol; colNum++) {\n      const pxX = colNum + xDiff;\n      const [xId, yId] = rhombusPixel2unit([pxX, pxY], size, pos);\n      // -del- 排除掉奇数末个，实现整齐效果 -del- ，不再干预、自行 filter\n      // if (yIsSingle || xIsSingle || !isOdd || colNum !== maxCol) {\n        filter(xId, yId, colNum, rowNum, minCol, minRow, maxCol, maxRow, column, row) && ret.push(processor(xId, yId, colNum, rowNum, minCol, minRow, maxCol, maxRow, column, row));\n      // }\n    }\n  }\n  return ret;\n};\n/*\nexport function getStaggeredUnitsByRowCol (column = 1, row = 1, processor = (x, y)=>[x, y], filter = (x, y)=>true) {\n  const ret = [];\n  const xIsSingle = column === 1;\n  const halfX = Math.round(column / 2);\n  const halfY = Math.round(row / 2);\n  const size = [1, 1];\n  const pos = [0, 0];\n  for(let yNum = 1; yNum <= row; yNum++) {\n    const pxY = ((yNum - halfY) / 2);\n    const isOdd = yNum % 2 === 1;\n    // 奇数行右移，实现错列对齐\n    const xDiff = isOdd ? 0.5 : 0;\n    for(let xNum = 0; xNum < column; xNum++) {\n      const pxX = xNum + xDiff - halfX;\n      let [xId, yId] = rhombusPixel2unit([pxX, pxY], size, pos);\n      xId = Math.round(xId);\n      yId = Math.round(yId);\n      // 排除掉奇数第一个，实现整齐效果\n      if(xIsSingle || isOdd || xNum !== 0) {filter(xId, yId, xNum, yNum, column, row) && ret.push(processor(xId, yId, xNum, yNum, column, row));}\n    }\n  }\n  return ret;\n};*/\n\n/* 将任意像素坐标按错列布局中单元格尺寸取整，对应到相应像素坐标\n* @param {Array}    pos       像素坐标 x y 值\n* @param {Array}    size      单元格宽高 w h 值\n* @param {Array}    offsetPos 要累加到结果 x y 值上的偏移量\n* @return {Array} 生成的坐标集合\n*/\nexport function staggeredUnitRound ([vX = 0, vY = 0] = [], [w = 78, h = 40] = [], [oX = 0, oY = 0] = []) {\n  const halfW = w / 2;\n  const halfH = h / 2;\n  const y = Math.round(vY / halfH) * halfH;\n  let x = Math.round(vX / w) * w;\n\n  // 偶数行错列布局右移部分回填\n  if(y % h === halfH) {\n    // 鼠标位置大于半个则回移，小于半个则右移；保证在单元格内\n    x += (vX - x) >= 0 ? halfW : -halfW;\n  }\n  return [x + oX, y + oY];\n}\n","// 上下左右8个方位邻居单元的坐标差值及评分权重\nexport default [\n  [1, 0, 10],\n  [0, 1, 10],\n  [0, -1, 10],\n  [-1, 0, 10],\n  [-1, -1, 14],\n  [-1, 1, 14],\n  [1, -1, 14],\n  [1, 1, 14]\n];\n","/* 在 N*N 的坐标系集合中以1为单位进行A*寻径\n* @param {Array}   startUnitXY  X、Y元坐标值\n* @param {Array}   endUnitXY  X、Y元坐标值\n* @param {Function}  filter     自行过滤\n*  比如已知当前坐标，可以根据坐标对应的精灵属性判断是否可穿越：\n*  filter(x:当前位置X, y:当前位置Y, cost:位移成本(平移则为10、对角则为14), parentX:从哪个坐标过来的, parentY::从哪个坐标过来的)\n* @return {Array} 匹配的路径集合或空数组\n*/\n// 上右下左8个方向相邻单元的差值及评分权重 - 方向优先级以列表次序为准（这里后续可以适度扩展动态优先级次序）\nimport referenceArr from './tile-neighbors';\n\nexport default function (startUnitXY = [], endUnitXY = [], filter = (xId, yId, cost, refX, refY)=>true) {\n  // console.log(fromX + ',' + fromY, 'to', toX + ',' + toY);\n  const [fromX = 0, fromY = 0] = startUnitXY;\n  const [toX = 0, toY = 0] = endUnitXY;\n\n  // 起止点相同直接返回当前点\n  if(fromX === toX && fromY === toY) {\n    return [startUnitXY];\n  }\n  // 排除不可能到达的点，避免死循环\n  if(Math.abs(fromX % 1) !== Math.abs(toX % 1) || Math.abs(fromY % 1) !== Math.abs(toY % 1)) {\n    return [];\n  }\n  const cost = {};\n  const parentsPoints = {};\n\n  cost[startUnitXY.join()] = 0;\n\n  // const _limit = 0;\n  function checker (x, y) {\n    const eligiblePoints = [];\n    const currentCost = cost[x + ',' + y];\n    for(let refI = 0; refI < 8; refI++) {\n      const ref = referenceArr[refI];\n      const nextX = x + ref[0];\n      const nextY = y + ref[1];\n      const refCost = ref[2];\n      const nextKey = nextX + ',' + nextY;\n      const nextCost = cost[nextKey];\n      if(filter(nextX, nextY, refCost, x, y) && (nextCost === undefined || currentCost + refCost < nextCost)) {\n        cost[nextKey] = currentCost + refCost;\n        parentsPoints[nextKey] = [x, y];\n        eligiblePoints.push([nextX, nextY]);\n        if(nextX === toX && nextY === toY) {\n          break;\n        }\n      }\n    }\n    return eligiblePoints;\n  };\n\n  const openlist = [ startUnitXY ];\n  const path = [];\n  while(openlist.length) {\n    const curPoint = openlist.pop();\n    const eligiblePoints = checker(curPoint[0], curPoint[1]);\n    const epLen = eligiblePoints.length;\n    for(let i = 0; i < epLen; i++) {\n      const extPoint = eligiblePoints[i];\n      // 到达终点生成路径\n      if(extPoint[0] === toX && extPoint[1] === toY) {\n        path.push(endUnitXY);\n        let pathPoint = endUnitXY;\n        // 回查到完整路径\n        while(pathPoint[0] !== fromX || pathPoint[1] !== fromY) {\n          pathPoint = parentsPoints[pathPoint.join()];\n          path.unshift(pathPoint);\n        }\n        // console.log(JSON.stringify(path));\n        return path;\n      }\n      openlist.unshift(extPoint);\n    }\n  }\n  return path;\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/* 查找二维坐标系相邻元素\n* @param {Array}     xyNum              瓦片坐标值，如：[xNum, yNum]\n* @param {Array}     referenceMatrix    相邻元素差值矩阵，也就是[xNum, yNum]与相邻坐标差集合，如：[[-1, -1], [1, 1], ...]\n* @param {Function}  filter             自行过滤方法，参数示例：(xyNum = [xNum, yNum], rmXY = [-1, -1])\n* @return {Array}    匹配的邻居坐标集合或空数组\n*/\nexport default function getNeighborsPoints(\n  xyNum = [0, 0],\n  referenceMatrix = [\n    [1, 0],\n    [0, 1],\n    [-1, 0],\n    [0, -1],\n  ],\n  filter = (xyNum, diffXY) => true,\n) {\n  const points = [];\n  const [xNum, yNum] = xyNum;\n  referenceMatrix.some((diffXY) => {\n    const xyNumCurr = [xNum + diffXY[0], yNum + diffXY[1]];\n    const filterRet = filter(xyNumCurr, diffXY);\n    if (filterRet === 'break') return false;\n    if(filterRet) {\n      points.push(xyNumCurr);\n    }\n  });\n  return points;\n}\n","import getNeighborsPoints from './neighbors';\n\nconst xyNum2Str = ([xNum, yNum]) => `${xNum}_${yNum}`;\n\n/* A*寻径\n* @param {Array}                 staXyNum           数据坐标值，如：[xNum, yNum]\n* @param {Array}                 endXyNum           数据坐标值，如：[xNum, yNum]\n* @param {Array || Function}     referenceMatrix    相邻元素差值矩阵，也就是[xNum, yNum, cost]与相邻坐标差集合，如：[[-1, -1, 1.414], [1, 1, 1], ...]\n* @param {Function}              filterFun          自行过滤方法，参数示例：(xyNum = [xNum, yNum], xyDiff = [-1, -1])\n* @return {Array} 匹配的路径集合或空数组\n*/\nexport default function aStarPathFinding(\n  staXyNum = [0, 0],\n  endXyNum = [0, 0],\n  referenceMatrix,\n  filterFun = (xyNum, xyDiff) => true,\n  maximizable = 1e6,\n) {\n  const path = [];\n  const [staXNum, staYNum] = staXyNum;\n  const [endXNum, endYNum] = endXyNum;\n  const staPoint = [staXNum, staYNum, 0];\n  let n = 0;\n  // 起止点相同直接返回当前点\n  if(staXNum === endXNum && staYNum === endYNum) {\n    path.push(staPoint);\n  } else {\n    const refMatrixFun = referenceMatrix.constructor !== Function ? () => referenceMatrix : referenceMatrix;\n    const parents = {};\n    const costs = { [xyNum2Str(staXyNum)]: 0 };\n    const openlist = [staPoint];\n    while(openlist.length) {\n      const currPoint = openlist.pop();\n      const currCost = costs[xyNum2Str(currPoint)];\n      // 从邻居中查找可以更低成本通过的节点\n      getNeighborsPoints(currPoint, refMatrixFun(currPoint), (neiXyNum, xyDiff) => {\n        if (!filterFun(neiXyNum, xyDiff)) return;\n        const neiXYStr = xyNum2Str(neiXyNum);\n        const oldCost = costs[neiXYStr];\n        const neiCost = Math.round((currCost + (xyDiff[2] || 1)) * 1e3) / 1e3;\n        if (oldCost !== undefined && neiCost >= oldCost) return;\n        costs[neiXYStr] = neiCost;\n        parents[neiXYStr] = currPoint;\n\n        n++;\n        if (n > maximizable) throw new Error('[aStarPathFinding] The number of loops exceeds the maximum value:' + maximizable);\n        const [neiXNum, neiYNum] = neiXyNum;\n        const neiPoint = [neiXNum, neiYNum, neiCost];\n        // 到达终点生成路径\n        if(neiXNum === endXNum && neiYNum === endYNum) {\n          path.push(neiPoint);\n          // 回查链表得到完整路径数组\n          let prevXyNum = endXyNum;\n          while((prevXyNum = parents[xyNum2Str(prevXyNum)])) {\n            path.unshift(prevXyNum);\n          }\n          openlist.length = 0;\n          return 'break';\n        } else {\n          // 没到达终点，将当前点放入开放点列表，继续查找\n          openlist.unshift(neiPoint);\n        }\n      });\n    }\n  }\n  return path.length ? path : null;\n};\n","import aStarPathFindingFun from './a-star';\nexport const aStarPathFinding = aStarPathFindingFun;\n\nimport getNeighborsPointsFun from './neighbors';\nexport const getNeighborsPoints = getNeighborsPointsFun;\n","import * as shapesFuns from './shapes';\nexport const shapes = shapesFuns;\n\n/**  这里的坐标都是以1位单位，按四象限原点为(0, 0)为基准的   **/\n/**  错列或偶数个元素基于原点排列  **/\n\n// 公布tiled基本工具方法\nexport * from './utils';\n\n// export * from './ellipse';\n// export * from './polygon';\n\nimport astar from './astar';\n// 公布A*寻路\nexport const searchPath = astar;\n\n// 寻路\nimport * as pathFindingFuns from './path-finding';\nexport const pathFinding = pathFindingFuns;\n"],"names":["PI","Math","PI_DBL","PI_HALF","PI_OPF","PI_OA","angle2Radian","angle","radian2Angle","radian","getPoint","x0","y0","radiusX","radiusY","k","tan","abs","d","v","x","sqrt","getPointByAngle","getIsometryPoint","count","num","cos","sin","arrayLikeToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","HALF","FLAH","QUAR","RAUQ","TQUA","getVertexes","baseVertexes","width","height","axis","fun","y","map","_for","min","max","cbk","i","for_","forEachConfs","RightDown","minX","maxX","minY","maxY","RightUp","LeftDown","LeftUp","twoDimForEach","mainAxisRange","subAxisRange","renderOrder","iterator","forEachFun","retArr","ret","push","isStaggerLine","lineNum","stagger","round","Number","getPosition","lineRate","xyNum","tileSize","originXY","xNum","yNum","getPositions","_height","needOffset","isOddNum","mainAxisNum","subAxisNum","getInfoByPos","pos","originPos","originX","originY","lineHeight","dotX","dotY","xNumOffset","centerX","centerY","tileX","tileY","vertexes","directions","corners","getPolygonVertexes","getPolygonPositions","getPolygonInfoByPos","getNeighbors","distance","TQUA_VAL","directionsNormal","directionsOffset","getPolygonPosition","originXyNum","originXNum","originYNum","getHalfSize","getIsometricPosition","halfWidth","halfHeight","getIsometricPositions","getIsometricInfoByPos","xSteps","ySteps","ellipse","ellipseFuns","rect","rectFuns","hexagon","hexagonFuns","rhombus","rhombusFuns","polygon","polygonFuns","getUnitsByRowCol","column","row","processor","xId","yId","filter","halfCol","halfRow","getNeighbourUnitsByRowCol","getDiagonalUnitsByRowCol","getUnitsByDiagonal","startUnitXY","endUnitXY","startX","startY","endX","endY","oneArc","rotateUnit","unitXY","arc","sinv","cosv","unit2pixel","size","XY","_half_precision","pixel2unit","pixelXY","sqrt2","sincos45","unitDiff","unit2rhombusPixel","diagonal","X","Y","W","H","ox","oy","pixelX","pixelY","rhombusPixel2unit","uX","uY","unitX","unitY","getStaggeredUnitsByRowCol","minCol","floor","maxCol","minRow","maxRow","rowNum","pxY","isOdd","xDiff","colNum","pxX","staggeredUnitRound","vX","vY","w","h","oX","oY","halfW","halfH","cost","refX","refY","fromX","fromY","toX","toY","parentsPoints","join","checker","eligiblePoints","currentCost","refI","ref","referenceArr","nextX","nextY","refCost","nextKey","nextCost","undefined","openlist","path","length","curPoint","pop","epLen","extPoint","pathPoint","unshift","getNeighborsPoints","referenceMatrix","diffXY","points","some","xyNumCurr","filterRet","xyNum2Str","aStarPathFinding","staXyNum","endXyNum","filterFun","xyDiff","maximizable","staXNum","staYNum","endXNum","endYNum","staPoint","n","refMatrixFun","constructor","Function","parents","costs","currPoint","currCost","neiXyNum","neiXYStr","oldCost","neiCost","Error","neiXNum","neiYNum","neiPoint","prevXyNum","aStarPathFindingFun","getNeighborsPointsFun","shapes","shapesFuns","searchPath","astar","pathFinding","pathFindingFuns"],"mappings":"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"}