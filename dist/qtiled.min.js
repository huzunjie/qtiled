/**
 * QTiled v0.2.0
 * (c) 2021 huzunjie
 * Released under MIT
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).qtiled={})}(this,function(t){"use strict";function b(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,i,e=[],u=!0,a=!1;try{for(o=o.call(t);!(u=(r=o.next()).done)&&(e.push(r.value),!n||e.length!==n);u=!0);}catch(t){a=!0,i=t}finally{try{u||null==o.return||o.return()}finally{if(a)throw i}}return e}}(t,n)||function(t,n){if(t){if("string"==typeof t)return r(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=t[o];return r}function i(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,n){return[t,n]},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0},i=[],e=Math.round(t/2),u=Math.round(n/2),a=1;a<=t;a++)for(var v=a-e,d=1;d<=n;d++){var l=d-u;r(v,l,a,d,t,n)&&i.push(o(v,l,a,d,t,n))}return i}var e=Math.PI/180;function a(t){return Math.round(2*t)/2}var n=Math.sqrt(2),v=n/2,d=-1/n;function M(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=b(t,2),i=r[0],e=void 0===i?0:i,t=r[1],i=void 0===t?0:t,r=b(n,2),t=r[0],n=void 0===t?10:t,t=r[1],r=void 0===t?10:t,t=b(o,2),o=t[0],t=t[1],r=(i-(void 0===t?0:t))/(d*r),n=a(((e-(void 0===o?0:o))/(d*n)+r)/v/2);return[n,a(r/v-n)]}var m=[[1,0,10],[0,1,10],[0,-1,10],[-1,0,10],[-1,-1,14],[-1,1,14],[1,-1,14],[1,1,14]];n=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,n,o,r,i){return!0},o=(e=b(t,2))[0],r=void 0===o?0:o,i=void 0===(o=e[1])?0:o,e=b(n,2),h=void 0===(o=e[0])?0:o,f=void 0===(e=e[1])?0:e;if(r===h&&i===f)return[t];if(Math.abs(r%1)!==Math.abs(h%1)||Math.abs(i%1)!==Math.abs(f%1))return[];var g={},c={};g[t.join()]=0;for(var u=[t],a=[];u.length;)for(var v=u.pop(),d=function(t,n){for(var o=[],r=g[t+","+n],i=0;i<8;i++){var e=m[i],u=t+e[0],a=n+e[1],v=e[2],d=u+","+a,e=g[d];if(l(u,a,v,t,n)&&(void 0===e||r+v<e)&&(g[d]=r+v,c[d]=[t,n],o.push([u,a]),u===h&&a===f))break}return o}(v[0],v[1]),s=d.length,p=0;p<s;p++){var M=d[p];if(M[0]===h&&M[1]===f){a.push(n);for(var y=n;y[0]!==r||y[1]!==i;)y=c[y.join()],a.unshift(y);return a}u.unshift(M)}return a};t._half_precision=a,t.getDiagonalUnitsByRowCol=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,n){return[t,n]},u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=Math.round(t/2)-t%2,v=Math.round(n/2)-n%2;return i(t,n,o,function(t,n,o,r,i,e){return u(t,n,o,r,i,e)&&Math.abs(t)/a+Math.abs(n)/v<=1})},t.getNeighbourUnitsByRowCol=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,n){return[t,n]},u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0};return i(t+2,n+2,o,function(t,n,o,r,i,e){return u(t,n,o,r,i,e)&&(1===o||o===i||1===r||r===e)})},t.getStaggeredUnitsByRowCol=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,n){return[t,n]},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(t,n){return!0},i=[],e=-Math.floor(t/2),u=t+e-1,a=-Math.floor(n/2),v=n+a-1,d=[1,1],l=[0,0],h=a;h<=v;h++)for(var f=.5*h,g=.5===Math.abs(f%1)?.5:0,c=e;c<=u;c++){var s=b(M([c+g,f],d,l),2),p=s[0],s=s[1];r(p,s,c,h,e,a,u,v,t,n)&&i.push(o(p,s,c,h,e,a,u,v,t,n))}return i},t.getUnitsByDiagonal=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,n){return[t,n]},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0},i=b(t,2),e=void 0===(u=i[0])?0:u,u=void 0===(a=i[1])?0:a,i=b(n,2),a=void 0===(a=i[0])?0:a,i=void 0===(i=i[1])?0:i,v=Math.min(e,a),d=Math.max(e,a),l=Math.min(u,i),h=Math.max(u,i),f=[],g=v;g<=d;g++)for(var c=l;c<=h;c++)r(g,c,v,l,d,h,t,n)&&f.push(o(g,c,v,l,d,h,t,n));return f},t.getUnitsByRowCol=i,t.pixel2unit=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[10,10],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return t.map(function(t,n){return a((t-r[n])/o[n])})},t.rhombusPixel2unit=M,t.rotateUnit=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=b(t,2),t=void 0===(r=o[0])?0:r,o=void 0===(r=o[1])?0:r,r=n*e,n=10*Math.sin(r),r=10*Math.cos(r);return[Math.round(t*r-o*n)/10,Math.round(t*n+o*r)/10]},t.searchPath=n,t.staggeredUnitRound=function(){var t=b(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],2),n=void 0===(a=t[0])?0:a,o=void 0===(e=t[1])?0:e,r=b(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],2),i=void 0===(u=r[0])?78:u,t=void 0===(a=r[1])?40:a,e=b(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],2),r=void 0===(u=e[0])?0:u,u=void 0===(a=e[1])?0:a,e=i/2,a=t/2,o=Math.round(o/a)*a,i=Math.round(n/i)*i;return o%t==a&&(i+=0<=n-i?e:-e),[i+r,o+u]},t.unit2pixel=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[10,10],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return t.map(function(t,n){return a(t*o[n]+r[n])})},t.unit2rhombusPixel=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=b(t,2),i=void 0===(e=r[0])?0:e,t=void 0===(u=r[1])?0:u,e=b(n,2),u=void 0===(r=e[0])?10:r,r=void 0===(n=e[1])?10:n,n=(e=b(o,2))[0],e=void 0===(o=e[1])?0:o,o=(i+t)*v;return[a((i-t)*v*d*u+(void 0===n?0:n)),a(o*d*r+e)]},Object.defineProperty(t,"__esModule",{value:!0})});
