/**
 * qtiled v0.2.2
 * (c) 2008-2021 huzunjie
 * Released under MIT
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).qtiled={})}(this,function(n){"use strict";var u=Math.PI,l=2*u,d=u/2,v=u+d,t=u/180;function i(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)*t}function h(n,t,e,o,r){(r%=l)<0&&(r+=l);var i=Math.tan(r);if(1e5<Math.abs(i))return[n,t+(r<u?o:-o)];r=r<=d||v<r?1:-1,o=1/Math.pow(e,2)+Math.pow(i,2)/Math.pow(o,2),o=r*Math.sqrt(1/o)+n;return[o,i*o+t-i*n]}function y(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var o,r,i=[],u=!0,l=!1;try{for(e=e.call(n);!(u=(o=e.next()).done)&&(i.push(o.value),!t||i.length!==t);u=!0);}catch(n){l=!0,r=n}finally{try{u||null==e.return||e.return()}finally{if(l)throw r}}return i}}(n,t)||e(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(n){return function(n){if(Array.isArray(n))return o(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,t){if(n){if("string"==typeof n)return o(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Map"===(e="Object"===e&&n.constructor?n.constructor.name:e)||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(n,t):void 0}}function o(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}var a=.5,r=-a,f=.25,c=-f;function s(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,t="x"===(3<arguments.length&&void 0!==arguments[3]?arguments[3]:"y")?function(n){var t=y(n,2),n=t[0];return[t[1]*e,n*o]}:function(n){var t=y(n,2),n=t[0],t=t[1];return[n*e,t*o]};return n.map(t)}function p(n,t,e){for(var o=n;o<=t;o++)e(o)}function b(n,t,e){for(var o=t;n<=o;o--)e(o)}var m={RightDown:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length?arguments[4]:void 0;p(n,t,function(t){return p(e,o,function(n){return r(t,n)}),0})},RightUp:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length?arguments[4]:void 0;p(n,t,function(t){return b(e,o,function(n){return r(t,n)}),0})},LeftDown:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length?arguments[4]:void 0;b(n,t,function(t){return p(e,o,function(n){return r(t,n)}),0})},LeftUp:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length?arguments[4]:void 0;b(n,t,function(t){return b(e,o,function(n){return r(t,n)}),0})}};function _(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"RightDown",o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(n,t){return[n,t]},r=[];return(m[e]||m.RightDown).apply(void 0,g(n).concat(g(t),[function(n,t){t=o(n,t);t&&r.push(t)}])),r}function P(n,t){return"none"!==t&&Math.abs(Math.round(n)%2)===Number("odd"===t)}function w(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"none",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[0,0],i=y(e,2),u=i[0],e=i[1],i=y(t,2),t=i[0],i=i[1];return[r[0]+(t+(P(i,o)?a:0))*u,r[1]+i*e*n,t,i]}function M(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[8,4],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"odd",i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"RightDown",o=y(o,2),u=o[0],l=o[1]*n,d="none"!==r,v=Number("odd"===r);return _(t,e,i,function(n,t){var e=n;return d&&Math.abs(Math.round(t)%2)===v&&(e+=a),[e*u,t*l,n,t]})}function I(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[8,4],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"odd",i=y(e,2),u=i[0],l=i[1],e=y(o,2),i=e[0],o=e[1]*n,e=t[0]-u,n=t[1]-l,t=0,n=Math.round(n/o);"none"!==r&&Math.abs(n%2)===Number("odd"===r)&&(t=a);e=Math.round(e/i-t);return[e,n,(e+t)*i+u,n*o+l]}var A=[[r,r],[a,r],[a,a],[r,a]],j=[[0,-1,1,"↑"],[1,0,1,"→"],[0,1,1,"↓"],[-1,0,1,"←"]],x=[[-1,-1,1.414,"↖"],[1,-1,1.414,"↗"],[1,1,1.414,"↘"],[-1,1,1.414,"↙"]];var O=[[0,r],[a,c],[a,f],[0,a],[r,f],[r,c]],D=.75,R=[[-1,-1,1,"↖"],[0,-1,1,"↗"],[0,1,1,"↘"],[-1,1,1,"↙"],[-1,0,1,"←"],[1,0,1,"→"]],S=[[0,-1,1,"↖"],[1,-1,1,"↗"],[1,1,1,"↘"],[0,1,1,"↙"],[-1,0,1,"←"],[1,0,1,"→"]];var z=[[0,r],[a,0],[0,a],[r,0]];function B(){var n=y(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[1,1],2),t=n[0],n=n[1];return[(void 0===t?1:t)*a,(void 0===n?1:n)*a]}function F(n,t,e,o){return[(n+t)*e,(t-n)*o]}function L(n){var t=y(n,2),n=t[0],t=t[1];return"".concat(n,"_").concat(t)}function N(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(n){return[]},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e6,f=[],n=y(o,2),t=n[0],e=n[1],c=(n=y(g,2))[0],s=n[1],i=[t,e,0],p=0;return t===c&&e===s?f.push(i):function(){for(var n,t,e,d={},v=(n={},t=L(o),e=0,t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n),h=[i];h.length;)!function(){var u=h.pop(),l=v[L(u)];r(u).some(function(n){var t=y(n,3),e=t[0],o=t[1],r=t[2],n=L([e,o]),t=v[n],r=Math.round(1e3*(l+(r||1)))/1e3;if(!(void 0!==t&&t<=r)){if(v[n]=r,d[n]=u,a<++p)throw new Error("[pathFinding.aStar] The number of loops exceeds the maximum value:"+a);r=[e,o,r];if(e===c&&o===s){f.push(r);for(var i=g;i=d[L(i)];)f.unshift(i);return h.length=0,!1}h.unshift(r)}})}()}(),f.length?f:null}c=Object.freeze({__proto__:null,ellipse:Object.freeze({__proto__:null,PI:u,PI_DBL:l,PI_HALF:d,PI_OPF:v,PI_OA:t,angle2Radian:i,radian2Angle:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/t},getPoint:h,getPointByAngle:function(n,t,e,o,r){return h(n,t,e,o,i(r))},getIsometryPoint:function(n,t,e,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return r+=l*o/e,[n*Math.cos(r),t*Math.sin(r)]}}),rect:Object.freeze({__proto__:null,vertexes:A,directions:j,corners:x,getVertexes:function(){var n=(t=y(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[1,1],2))[0],t=t[1];return s(A,n,t)},getPosition:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[8,4],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return[e[0]+n[0]*t[0],e[1]+n[1]*t[1]]},getPositions:function(){return M(1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],"none",3<arguments.length&&void 0!==arguments[3]?arguments[3]:"RightDown")},getInfoByPos:function(){return I(1,0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],"none")},getNeighbors:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[].concat(j,x),r=(n=y(n,2))[0],i=n[1];return t.map(function(n){var t=y(n,4),e=t[0],o=t[1],n=t[2],t=t[3];return[e+r,o+i,n,t]})},getNeighborsByDistance:function(){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(n,t){return[n,t]};return _([-n,n],[-n,n],3<arguments.length?arguments[3]:void 0,t)}}),hexagon:Object.freeze({__proto__:null,vertexes:O,TQUA:D,directionsNormal:R,directionsOffset:S,getVertexes:function(){var n=(t=y(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[1,1],2))[0],t=t[1];return s(O,void 0===n?1:n,void 0===t?1:t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"y")},getPosition:function(){return w(D,0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],1<arguments.length&&void 0!==arguments[1]?arguments[1]:[8,4],2<arguments.length&&void 0!==arguments[2]?arguments[2]:"odd",3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0])},getPositions:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"RightDown";return M(D,n,t,e,4<arguments.length&&void 0!==arguments[4]?arguments[4]:"odd",o)},getInfoByPos:function(){return I(D,0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],3<arguments.length&&void 0!==arguments[3]?arguments[3]:"odd")},getNeighbors:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"odd",r=(n=y(n,2))[0],i=n[1];return(P(i,t)?S:R).map(function(n){var t=y(n,4),e=t[0],o=t[1],n=t[2],t=t[3];return[e+r,o+i,n,t]})}}),rhombus:Object.freeze({__proto__:null,getHalfSize:B,getVertexes:function(){var n=(t=y(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[1,1],2))[0],t=t[1];return s(z,void 0===n?1:n,void 0===t?1:t)},getPositions:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"RightDown";return M(a,n,t,e,4<arguments.length&&void 0!==arguments[4]?arguments[4]:"odd",o)},getIsometricPosition:F,getIsometricPositions:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"RightDown",r=(e=y(B(e),2))[0],i=e[1];return _(n,t,o,function(n,t){return[].concat(g(F(n,t,r,i)),[n,t])})},getInfoByPos:function(){return I(a,0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4],3<arguments.length&&void 0!==arguments[3]?arguments[3]:"odd")},getIsometricInfoByPos:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],e=(i=y(B(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[8,4]),2))[0],o=i[1],r=(u=y(t,2))[0],i=u[1],t=(n[0]-r)/e*a,u=(n[1]-i)/o*a,n=Math.round(u+t),o=y(F(u=Math.round(t-u),n,e,o),2);return[u,n,o[0]+r,o[1]+i]}}),polygon:Object.freeze({__proto__:null,HALF:a,FLAH:r,QUAR:f,RAUQ:c,TQUA:.75,getVertexes:s,twoDimForEach:_,isStaggerLine:P,getPosition:w,getPositions:M,getInfoByPos:I})});n.pathFinding=Object.freeze({__proto__:null,aStar:N}),n.shapes=c,Object.defineProperty(n,"__esModule",{value:!0})});
